<% extend './views/template.html' %>
<script>
	app.controller('page', function($scope, $http, grid, $location) {
		var id = location.href.split('/').pop();
		$http.get('/api/merchant/' + id).then(function(res) {
			$scope.grid.data = res.data;
			for(var i = 0; i< res.data.length;i++) {
				if(!res.data[i].award)
					continue;
				$scope.merchant = res.data[i].award.merchants[0];
			}
		});
		$scope.grid = grid;
	});
	
</script>
<div class="starter-template">
	<h1><a href="http://company.g0v.ronny.tw/id/[[merchant._id]]" target="_blank" ng-bind="merchant.name"></a> 廠商得標案件檢索</h1>
	
	<ng-react-grid grid="grid"></ng-react-grid>
</div>
